<% require 'itunes-search-api' %>

<div class="container">
<%= paginate @searchs %>

<table class="table", border="0" width="100%" style="table-layout: fixed;">
    <thead>
        <tr>
            <th width="15%">アルバム名</th>
            <th width="20%">曲名</th>
            <th width="20%">アーティスト名</th>
            <th width="20%">試聴</th>
            <th width="10%">My Music</th>
        </tr>
    </thead>
    <tbody>
        <% @searchs.each do |track| %>

        <tr>
            <% if track['collectionId'] != nil %>
                <td><%= track['collectionName'] %></td>
                <td><%= track['trackName'] %></td>
                <td><%= track['artistName'] %></td>
                <td>
                        <iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="150" style="width:100%;max-width:660px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.music.apple.com/jp/album/%E7%82%8E/<%= track['collectionId'] %>?i=<%= track['trackId'] %>"></iframe>
                </td>
                <td>
                        <%= link_to "詳細", track_path(track['collectionId'], track['trackId']), class:"btn btn-dark" %>
                </td>
            <% end %>
        </tr>
        <% end %>
    </tbody>
</table>
<%= paginate @searchs, class:"text-dark" %>

</div>